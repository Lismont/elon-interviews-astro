---
import PageLayout from "../layouts/PageLayout.astro";

export async function getStaticPaths() {
  // Fetch the list of pages from the API
  const response = await fetch("https://payload-nrx5.onrender.com/api/pages");
  const { docs } = await response.json();

  // Map over the docs to create a params object for each page
  const paths = docs.map((doc) => ({
    params: { slug: doc.slug },
  }));
  console.log(paths);
  return paths;
}

let { slug } = Astro.params;

if (typeof slug !== "string") {
  throw new Error("Expected 'slug' to be a string.");
}
---

<PageLayout slug={"home"} />
